<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="952px" preserveAspectRatio="none" style="width:830px;height:952px;background:#FFFFFF;" version="1.1" viewBox="0 0 830 952" width="830px" zoomAndPan="magnify"><title>Vista de Processo - N&#237;vel 3: Criar Livro</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="280.0547" x="276.3726" y="28.5352">Vista de Processo - N&#237;vel 3: Criar Livro</text><g><title>.BookController</title><rect fill="#FFFFFF" height="711.0527" style="stroke:#181818;stroke-width:1;" width="10" x="209.4326" y="150.2871"/></g><g><title>.FileStorageService</title><rect fill="#FFFFFF" height="68.9316" style="stroke:#181818;stroke-width:1;" width="10" x="441.9556" y="221.9082"/></g><g><title>.BookService</title><rect fill="#FFFFFF" height="185.1738" style="stroke:#181818;stroke-width:1;" width="10" x="571.8169" y="413.7266"/></g><g><title>.BookRepository</title><rect fill="#FFFFFF" height="68.9316" style="stroke:#181818;stroke-width:1;" width="10" x="746.8047" y="500.6582"/></g><rect fill="none" height="148.5078" style="stroke:#000000;stroke-width:1.5;" width="382.7988" x="144.4199" y="236.9082"/><rect fill="none" height="338.6816" style="stroke:#000000;stroke-width:1.5;" width="813.7998" x="10" y="515.6582"/><g><title>.Cliente</title><rect fill="#000000" fill-opacity="0.00000" height="752.3633" width="8" x="44.8672" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="48" x2="48" y1="118.9766" y2="871.3398"/></g><g><title>.BookController</title><rect fill="#000000" fill-opacity="0.00000" height="752.3633" width="8" x="210.4326" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="214.4199" x2="214.4199" y1="118.9766" y2="871.3398"/></g><g><title>.FileStorageService</title><rect fill="#000000" fill-opacity="0.00000" height="752.3633" width="8" x="442.9556" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="446.6924" x2="446.6924" y1="118.9766" y2="871.3398"/></g><g><title>.BookService</title><rect fill="#000000" fill-opacity="0.00000" height="752.3633" width="8" x="572.8169" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="576.2188" x2="576.2188" y1="118.9766" y2="871.3398"/></g><g><title>.BookRepository</title><rect fill="#000000" fill-opacity="0.00000" height="752.3633" width="8" x="747.8047" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="750.8096" x2="750.8096" y1="118.9766" y2="871.3398"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.7344" x="20" y="116.0234">:Cliente</text><ellipse cx="48.8672" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.8672,58.9883 L48.8672,85.9883 M35.8672,66.9883 L61.8672,66.9883 M48.8672,85.9883 L35.8672,100.9883 M48.8672,85.9883 L61.8672,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.7344" x="20" y="883.875">:Cliente</text><ellipse cx="48.8672" cy="895.3281" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.8672,903.3281 L48.8672,930.3281 M35.8672,911.3281 L61.8672,911.3281 M48.8672,930.3281 L35.8672,945.3281 M48.8672,930.3281 L61.8672,945.3281" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Controller"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.0254" x="154.4199" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.0254" x="161.4199" y="108.0234">:BookController</text></g><g class="participant participant-tail" data-participant="Controller"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.0254" x="154.4199" y="870.3398"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.0254" x="161.4199" y="890.875">:BookController</text></g><g class="participant participant-head" data-participant="FileStorage"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140.5264" x="376.6924" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.5264" x="383.6924" y="108.0234">:FileStorageService</text></g><g class="participant participant-tail" data-participant="FileStorage"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140.5264" x="376.6924" y="870.3398"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.5264" x="383.6924" y="890.875">:FileStorageService</text></g><g class="participant participant-head" data-participant="Service"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.1963" x="527.2188" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1963" x="534.2188" y="108.0234">:BookService</text></g><g class="participant participant-tail" data-participant="Service"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99.1963" x="527.2188" y="870.3398"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85.1963" x="534.2188" y="890.875">:BookService</text></g><g class="participant participant-head" data-participant="Repository"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.9902" x="689.8096" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9902" x="696.8096" y="108.0234">:BookRepository</text></g><g class="participant participant-tail" data-participant="Repository"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.9902" x="689.8096" y="870.3398"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.9902" x="696.8096" y="890.875">:BookRepository</text></g><g><title>.BookController</title><rect fill="#FFFFFF" height="711.0527" style="stroke:#181818;stroke-width:1;" width="10" x="209.4326" y="150.2871"/></g><g><title>.FileStorageService</title><rect fill="#FFFFFF" height="68.9316" style="stroke:#181818;stroke-width:1;" width="10" x="441.9556" y="221.9082"/></g><g><title>.BookService</title><rect fill="#FFFFFF" height="185.1738" style="stroke:#181818;stroke-width:1;" width="10" x="571.8169" y="413.7266"/></g><g><title>.BookRepository</title><rect fill="#FFFFFF" height="68.9316" style="stroke:#181818;stroke-width:1;" width="10" x="746.8047" y="500.6582"/></g><g class="message" data-participant-1="Client" data-participant-2="Controller"><polygon fill="#181818" points="197.4326,146.2871,207.4326,150.2871,197.4326,154.2871,201.4326,150.2871" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.8672" x2="203.4326" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.5654" x="55.8672" y="145.5449">PUT /api/books/{isbn}</text></g><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="261.4326" y1="179.5977" y2="179.5977"/><line style="stroke:#181818;stroke-width:1;" x1="261.4326" x2="261.4326" y1="179.5977" y2="192.5977"/><line style="stroke:#181818;stroke-width:1;" x1="220.4326" x2="261.4326" y1="192.5977" y2="192.5977"/><polygon fill="#181818" points="230.4326,188.5977,220.4326,192.5977,230.4326,196.5977,226.4326,192.5977" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.4736" x="226.4326" y="174.8555">resource.setPhotoURI(null)</text></g><g class="message" data-participant-1="Controller" data-participant-2="FileStorage"><polygon fill="#181818" points="429.9556,217.9082,439.9556,221.9082,429.9556,225.9082,433.9556,221.9082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="435.9556" y1="221.9082" y2="221.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.7354" x="226.4326" y="217.166">getRequestPhoto(file)</text></g><path d="M144.4199,236.9082 L206.5586,236.9082 L206.5586,244.2188 L196.5586,254.2188 L144.4199,254.2188 L144.4199,236.9082" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="148.5078" style="stroke:#000000;stroke-width:1.5;" width="382.7988" x="144.4199" y="236.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="159.4199" y="250.4766">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.7847" x="221.5586" y="249.543">[Photo presente]</text><g class="message" data-participant-1="FileStorage" data-participant-2="Controller"><polygon fill="#181818" points="230.4326,286.8398,220.4326,290.8398,230.4326,294.8398,226.4326,290.8398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="224.4326" x2="445.9556" y1="290.8398" y2="290.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55.7007" x="236.4326" y="270.7871">fileName</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.6514" x="236.4326" y="286.0977">(e.g., "book_uuid.jpg")</text></g><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="261.4326" y1="320.1504" y2="320.1504"/><line style="stroke:#181818;stroke-width:1;" x1="261.4326" x2="261.4326" y1="320.1504" y2="333.1504"/><line style="stroke:#181818;stroke-width:1;" x1="220.4326" x2="261.4326" y1="333.1504" y2="333.1504"/><polygon fill="#181818" points="230.4326,329.1504,220.4326,333.1504,230.4326,337.1504,226.4326,333.1504" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.5229" x="226.4326" y="315.4082">resource.setPhotoURI(fileName)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="144.4199" x2="527.2188" y1="342.1504" y2="342.1504"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113.1689" x="149.4199" y="352.7852">[Sem photo ou erro]</text><g class="message" data-participant-1="FileStorage" data-participant-2="Controller"><polygon fill="#181818" points="230.4326,373.416,220.4326,377.416,230.4326,381.416,226.4326,377.416" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="224.4326" x2="445.9556" y1="377.416" y2="377.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.6514" x="236.4326" y="372.6738">null</text></g><g class="message" data-participant-1="Controller" data-participant-2="Service"><polygon fill="#181818" points="559.8169,409.7266,569.8169,413.7266,559.8169,417.7266,563.8169,413.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="565.8169" y1="413.7266" y2="413.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.2842" x="226.4326" y="408.9844">create(resource, isbn)</text></g><g class="message" data-participant-1="Service" data-participant-2="Service"><line style="stroke:#181818;stroke-width:1;" x1="581.8169" x2="623.8169" y1="458.3477" y2="458.3477"/><line style="stroke:#181818;stroke-width:1;" x1="623.8169" x2="623.8169" y1="458.3477" y2="471.3477"/><line style="stroke:#181818;stroke-width:1;" x1="582.8169" x2="623.8169" y1="471.3477" y2="471.3477"/><polygon fill="#181818" points="592.8169,467.3477,582.8169,471.3477,592.8169,475.3477,588.8169,471.3477" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.0557" x="588.8169" y="438.2949">Criar objeto Book</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.9878" x="588.8169" y="453.6055">com dados do request</text></g><g class="message" data-participant-1="Service" data-participant-2="Repository"><polygon fill="#181818" points="734.8047,496.6582,744.8047,500.6582,734.8047,504.6582,738.8047,500.6582" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="581.8169" x2="740.8047" y1="500.6582" y2="500.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.9834" x="588.8169" y="495.916">save(book)</text></g><path d="M10,515.6582 L72.1387,515.6582 L72.1387,522.9688 L62.1387,532.9688 L10,532.9688 L10,515.6582" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="338.6816" style="stroke:#000000;stroke-width:1.5;" width="813.7998" x="10" y="515.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="529.2266">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="53.4263" x="87.1387" y="528.293">[Sucesso]</text><g class="message" data-participant-1="Repository" data-participant-2="Service"><polygon fill="#181818" points="592.8169,565.5898,582.8169,569.5898,592.8169,573.5898,588.8169,569.5898" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="586.8169" x2="750.8047" y1="569.5898" y2="569.5898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31.751" x="598.8169" y="549.5371">book</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.7983" x="598.8169" y="564.8477">(com id, version=0)</text></g><g class="message" data-participant-1="Service" data-participant-2="Controller"><polygon fill="#181818" points="230.4326,594.9004,220.4326,598.9004,230.4326,602.9004,226.4326,598.9004" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="224.4326" x2="575.8169" y1="598.9004" y2="598.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31.751" x="236.4326" y="594.1582">book</text></g><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="261.4326" y1="658.832" y2="658.832"/><line style="stroke:#181818;stroke-width:1;" x1="261.4326" x2="261.4326" y1="658.832" y2="671.832"/><line style="stroke:#181818;stroke-width:1;" x1="220.4326" x2="261.4326" y1="671.832" y2="671.832"/><polygon fill="#181818" points="230.4326,667.832,220.4326,671.832,230.4326,675.832,226.4326,671.832" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.2007" x="226.4326" y="623.4688">Construir URI:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.1963" x="226.4326" y="638.7793">ServletUriComponentsBuilder</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1543" x="226.4326" y="654.0898">.pathSegment(isbn)</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="59.8672,697.1426,49.8672,701.1426,59.8672,705.1426,55.8672,701.1426" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.8672" x2="208.4326" y1="701.1426" y2="701.1426"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.7969" x="65.8672" y="696.4004">201 Created</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="823.7998" y1="710.1426" y2="710.1426"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="159.731" x="15" y="720.7773">[Erro na cria&#231;&#227;o (Exception)]</text><g class="message" data-participant-1="Repository" data-participant-2="Service"><polygon fill="#181818" points="587.8169,741.4082,577.8169,745.4082,587.8169,749.4082,583.8169,745.4082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="581.8169" x2="750.8047" y1="745.4082" y2="745.4082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.7754" x="593.8169" y="740.666">Exception</text></g><g class="message" data-participant-1="Service" data-participant-2="Controller"><polygon fill="#181818" points="230.4326,770.7188,220.4326,774.7188,230.4326,778.7188,226.4326,774.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="224.4326" x2="575.8169" y1="774.7188" y2="774.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.1401" x="236.4326" y="769.9766">throw Exception</text></g><g class="message" data-participant-1="Controller" data-participant-2="Controller"><line style="stroke:#181818;stroke-width:1;" x1="219.4326" x2="261.4326" y1="804.0293" y2="804.0293"/><line style="stroke:#181818;stroke-width:1;" x1="261.4326" x2="261.4326" y1="804.0293" y2="817.0293"/><line style="stroke:#181818;stroke-width:1;" x1="220.4326" x2="261.4326" y1="817.0293" y2="817.0293"/><polygon fill="#181818" points="230.4326,813.0293,220.4326,817.0293,230.4326,821.0293,226.4326,817.0293" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.0132" x="226.4326" y="799.2871">catch(Exception e)</text></g><g class="message" data-participant-1="Controller" data-participant-2="Client"><polygon fill="#181818" points="59.8672,842.3398,49.8672,846.3398,59.8672,850.3398,55.8672,846.3398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.8672" x2="208.4326" y1="846.3398" y2="846.3398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.1709" x="65.8672" y="841.5977">400 Bad Request</text></g><!--SRC=[bLHDZzCm4BtdLunwIgL-yN6A18TMYuI4LbLBELL2RZAqNbnFi9q0GlmQ3fpu5Vl7TkoqZPijPUd9YMVUl7dlfKuwXV11MYUWG9WRoj5QWY7Stl-fKS6B36P62WFlP6qeIKJko40lcoc9sc4FX8Ncd9J2E9dBKcZ71LEYppFIpf1IQ9gwqsEdzerKk6HSiSKbcbhc3Mxq-W9uN7auNwXQO4bMCiZtKDW-9ab36uQl8s8Pp5VlOInAETvmjnt_a7QZV_grPIqSnZiaxRaBOj1IPN8SMNJp7JbQBTwckbAgt-sATinWYsw1NogqJLFwYI_xxUnOZqGe1w4AIfxclKY0Vr4D33kiFDojsEDQfpZQZWRGypj-h2fPZExARQyV40gyED1V_UV2ntdz19L5DcaFPM1C5Q3XDFsBi5Vi6YVKHLVFGn8oo0roUNeaDW1lP2JcCJB9uN3Mt4IUDdV8R7sCrZgdFHIY80i5yRh1fRFcDbePM55ZwiMD1iRHy-Ojg_2fXVtQkw31YSScZ4xzR5aCe4PZ9UbNaqTEnU3-wiIhewW7xFQUbBXkCP-jCvKqmDvcQ-tR5BgLaJFQbwGvWdPQILMWMUjHATnkYTizlqqRvH_1U_pm2MRmVFACDVU6iQ4XB3US3z22RPJY_lVzBuBqvbkEfUFz-rSrEvKzMQFpFTtEqDU_epnHhLouVDTI1hmkmCl91AQYWCFdtoGxcXhzxJm0]--></g></svg>