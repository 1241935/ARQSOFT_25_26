<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="710px" preserveAspectRatio="none" style="width:575px;height:710px;background:#FFFFFF;" version="1.1" viewBox="0 0 575 710" width="575px" zoomAndPan="magnify"><title>Processo de Books: Auto-Subscri&#231;&#227;o e Fluxo de Cria&#231;&#227;o</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="399.8955" x="83.5588" y="28.5352">Processo de Books: Auto-Subscri&#231;&#227;o e Fluxo de Cria&#231;&#227;o</text><g><title>C </title><rect fill="#FFFFFF" height="324.416" style="stroke:#181818;stroke-width:1;" width="10" x="201.2378" y="361.4609"/></g><g><title>MB Broker</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="505.7681" y="244.2188"/></g><g><title>MB Broker</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="505.7681" y="627.2559"/></g><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="337.3804" x="129.0713" y="376.4609"/><g><title>Librarian</title><rect fill="#000000" fill-opacity="0.00000" height="584.9004" width="8" x="33.9893" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="37" x2="37" y1="118.9766" y2="703.877"/></g><g><title>C </title><rect fill="#000000" fill-opacity="0.00000" height="584.9004" width="8" x="202.2378" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="206.0713" x2="206.0713" y1="118.9766" y2="703.877"/></g><g><title>BD1</title><rect fill="#000000" fill-opacity="0.00000" height="584.9004" width="8" x="434.4517" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="438.4517" x2="438.4517" y1="118.9766" y2="703.877"/></g><g><title>MB Broker</title><rect fill="#000000" fill-opacity="0.00000" height="584.9004" width="8" x="506.7681" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="510.4517" x2="510.4517" y1="118.9766" y2="703.877"/></g><g class="participant participant-head" data-participant="L"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.9785" x="5" y="116.0234">Librarian</text><ellipse cx="37.9893" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M37.9893,58.9883 L37.9893,85.9883 M24.9893,66.9883 L50.9893,66.9883 M37.9893,85.9883 L24.9893,100.9883 M37.9893,85.9883 L50.9893,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="B"><rect fill="#E2E2F0" height="36" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.333" x="139.0713" y="81.9766"/><ellipse cx="157.0713" cy="99.9766" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M160.0444,105.6196 Q159.4634,105.9185 158.8242,106.0679 Q158.1851,106.2173 157.4795,106.2173 Q154.9727,106.2173 153.6528,104.5654 Q152.333,102.9136 152.333,99.7925 Q152.333,96.6631 153.6528,95.0112 Q154.9727,93.3594 157.4795,93.3594 Q158.1851,93.3594 158.8325,93.5088 Q159.48,93.6582 160.0444,93.957 L160.0444,96.6797 Q159.4136,96.0986 158.8201,95.8289 Q158.2266,95.5591 157.5957,95.5591 Q156.251,95.5591 155.5662,96.6257 Q154.8813,97.6924 154.8813,99.7925 Q154.8813,101.8843 155.5662,102.9509 Q156.251,104.0176 157.5957,104.0176 Q158.2266,104.0176 158.8201,103.7478 Q159.4136,103.478 160.0444,102.897 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.333" x="174.0713" y="102.5117">Books Service</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3916" x="421.7559" y="116.0234">BD1</text><path d="M420.4517,66.4883 C420.4517,56.4883 438.4517,56.4883 438.4517,56.4883 C438.4517,56.4883 456.4517,56.4883 456.4517,66.4883 L456.4517,92.4883 C456.4517,102.4883 438.4517,102.4883 438.4517,102.4883 C438.4517,102.4883 420.4517,102.4883 420.4517,92.4883 L420.4517,66.4883" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M420.4517,66.4883 C420.4517,76.4883 438.4517,76.4883 438.4517,76.4883 C438.4517,76.4883 456.4517,76.4883 456.4517,66.4883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Broker"><path d="M471.4517,92.4883 L550.0845,92.4883 C555.0845,92.4883 555.0845,105.7324 555.0845,105.7324 C555.0845,105.7324 555.0845,118.9766 550.0845,118.9766 L471.4517,118.9766 C466.4517,118.9766 466.4517,105.7324 466.4517,105.7324 C466.4517,105.7324 466.4517,92.4883 471.4517,92.4883" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M550.0845,92.4883 C545.0845,92.4883 545.0845,105.7324 545.0845,105.7324 C545.0845,118.9766 550.0845,118.9766 550.0845,118.9766" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.6328" x="471.4517" y="111.0234">MB Broker</text></g><g><title>C </title><rect fill="#FFFFFF" height="324.416" style="stroke:#181818;stroke-width:1;" width="10" x="201.2378" y="361.4609"/></g><g><title>MB Broker</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="505.7681" y="244.2188"/></g><g><title>MB Broker</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="505.7681" y="627.2559"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="568.0132" x="0" y="149.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="568.0132" y1="149.6318" y2="149.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="568.0132" y1="152.6318" y2="152.6318"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="218.2549" x="174.8792" y="138.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="199.9702" x="180.8792" y="155.5449">Fase de Inicializa&#231;&#227;o (Startup)</text><path d="M152,177.2871 L152,217.2871 L563,217.2871 L563,187.2871 L553,177.2871 L152,177.2871" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M553,177.2871 L553,187.2871 L563,187.2871 L553,177.2871" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289.3643" x="208.3245" y="194.8555">O Books Service regista-se para ouvir eventos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280.4077" x="208.3245" y="210.166">que ele pr&#243;prio (ou outros) venham a emitir.</text><g class="message" data-participant-1="B" data-participant-2="Broker"><polygon fill="#181818" points="493.7681,240.2188,503.7681,244.2188,493.7681,248.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="206.2378" x2="499.7681" y1="244.2188" y2="244.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.3887" x="274.3086" y="239.4766">Subscribe ("BookCreated")</text></g><g class="message" data-participant-1="Broker" data-participant-2="B"><polygon fill="#181818" points="217.2378,269.5293,207.2378,273.5293,217.2378,277.5293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="211.2378" x2="509.7681" y1="273.5293" y2="273.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.1689" x="307.9185" y="268.7871">Subscription OK</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="568.0132" x="0" y="302.1846"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="568.0132" y1="302.1846" y2="302.1846"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="568.0132" y1="305.1846" y2="305.1846"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="202.9189" x="182.5471" y="291.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="184.6343" x="188.5471" y="308.0977">Fluxo de Neg&#243;cio (Runtime)</text><g class="message" data-participant-1="L" data-participant-2="B"><polygon fill="#181818" points="189.2378,357.4609,199.2378,361.4609,189.2378,365.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="37.9893" x2="195.2378" y1="361.4609" y2="361.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.1655" x="75.0308" y="341.4082">POST /catalog</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.8516" x="56.1877" y="356.7188">{title, author, genre}</text></g><path d="M129.0713,376.4609 L306.0962,376.4609 L306.0962,383.7715 L296.0962,393.7715 L129.0713,393.7715 L129.0713,376.4609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="337.3804" x="129.0713" y="376.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127.7402" x="144.0713" y="390.0293">Transa&#231;&#227;o At&#243;mica</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31.061" x="321.0962" y="389.0957">[BD1]</text><g class="message" data-participant-1="B" data-participant-2="DB"><polygon fill="#181818" points="426.4517,411.082,436.4517,415.082,426.4517,419.082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.2378" x2="432.4517" y1="415.082" y2="415.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.728" x="255.4807" y="410.3398">Verificar/Inserir Autor</text></g><g class="message" data-participant-1="DB" data-participant-2="B"><polygon fill="#181818" points="222.2378,440.3926,212.2378,444.3926,222.2378,448.3926" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="216.2378" x2="437.4517" y1="444.3926" y2="444.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.7544" x="296.4675" y="439.6504">AuthorID</text></g><g class="message" data-participant-1="B" data-participant-2="DB"><polygon fill="#181818" points="426.4517,469.7031,436.4517,473.7031,426.4517,477.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.2378" x2="432.4517" y1="473.7031" y2="473.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.7764" x="250.4565" y="468.9609">Verificar/Inserir G&#233;nero</text></g><g class="message" data-participant-1="DB" data-participant-2="B"><polygon fill="#181818" points="222.2378,499.0137,212.2378,503.0137,222.2378,507.0137" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="216.2378" x2="437.4517" y1="503.0137" y2="503.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.7495" x="299.47" y="498.2715">GenreID</text></g><g class="message" data-participant-1="B" data-participant-2="DB"><polygon fill="#181818" points="426.4517,528.3242,436.4517,532.3242,426.4517,536.3242" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.2378" x2="432.4517" y1="532.3242" y2="532.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.2139" x="223.2378" y="527.582">Inserir Livro (AuthorID, GenreID)</text></g><g class="message" data-participant-1="DB" data-participant-2="B"><polygon fill="#181818" points="222.2378,557.6348,212.2378,561.6348,222.2378,565.6348" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="216.2378" x2="437.4517" y1="561.6348" y2="561.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.8833" x="300.4031" y="556.8926">Success</text></g><g class="message" data-participant-1="B" data-participant-2="DB"><polygon fill="#181818" points="426.4517,593.9453,436.4517,597.9453,426.4517,601.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.2378" x2="432.4517" y1="597.9453" y2="597.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.9116" x="260.8889" y="593.2031">Commit Transaction</text></g><g class="message" data-participant-1="B" data-participant-2="Broker"><polygon fill="#181818" points="493.7681,623.2559,503.7681,627.2559,493.7681,631.2559" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.2378" x2="499.7681" y1="627.2559" y2="627.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.0488" x="263.4785" y="622.5137">Publicar Evento "BookCreated"</text></g><g class="message" data-participant-1="Broker" data-participant-2="B"><polygon fill="#181818" points="222.2378,652.5664,212.2378,656.5664,222.2378,660.5664" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="216.2378" x2="509.7681" y1="656.5664" y2="656.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.2661" x="314.3699" y="651.8242">Ack (Recebido)</text></g><g class="message" data-participant-1="B" data-participant-2="L"><polygon fill="#181818" points="48.9893,681.877,38.9893,685.877,48.9893,689.877" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="42.9893" x2="205.2378" y1="685.877" y2="685.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.2485" x="52.4893" y="681.1348">201 Created (Success)</text></g><!--SRC=[XLBBRjim4BppAnRknGBifiunY0rOLXCOTUgW3dffUg3ehK9O8jKbAVI1VaqFHS_-1FzOLxGCrqQ0w20GozcTsHcwZJQr95c1yzzBv3zfvKDL2dUymQy1ZS8xT4uME2rrOK2XyKX2IEKjGM-XSvAafUc1TB0GtEcrqhKq7dgfjHi7AwH6Auo05AwleJyRl9fcsIYzJ60o4MlfPIuTCZuRHLIM2cOENBbB8IMxGTftnwCGNdkMV4zMiJ8BQuJ8T0NJuErm5NAdIE_-x7vRGBWfmxU8cR7CM1HYF8QRbf6hSyDoPQb_xE-Wl_AyGgWJ68-5CDOZs0O9qa573rUmX9FDWB3GpiiXJsoT0niQJO0DMsNTe-5T05bmJRjjJPevR62C9-iIOD0JUoq1A-qrlHOf32T7gcwP7A4VxPmHIe_hNj86e1i-7rpfMePjzx6nzjeQMBuJQpnlY2uSp7cFnMwhMcqVWl6wmlt-2-Z6tIzN3t2XEAhI5e_cPunW03Bu9qi3AD0G_lfFan05sL330qdZEckdVhUjj9BmYOF-B82_k6pM4dn4qb_uaYxcnl6POfWKKGmuh3MDXFCirbySSRlxQv3i-P3RLktpCmwT2zqGct6W6nnwalDPgw3QLoZGh8KupfdPYlFirbTj2E8isVkGbwrOU1lV2Pp4-rAwKxNXf51XhjSsUIxSlS85Oo_VZA2RowzxB_UqHOX_]--></g></svg>