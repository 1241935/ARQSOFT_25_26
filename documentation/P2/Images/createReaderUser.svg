<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="673px" preserveAspectRatio="none" style="width:1055px;height:673px;background:#FFFFFF;" version="1.1" viewBox="0 0 1055 673" width="1055px" zoomAndPan="magnify"><title>Create Reader and User - Saga Event-Driven Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="361.0742" x="343.1211" y="28.5352">Create Reader and User - Saga Event-Driven Flow</text><g><title>Librarian</title><rect fill="#FFFFFF" height="167.8633" style="stroke:#181818;stroke-width:1;" width="10" x="212.2671" y="250.5293"/></g><g><title>LendingsNReaders Service</title><rect fill="#FFFFFF" height="349.416" style="stroke:#181818;stroke-width:1;" width="10" x="469.3257" y="279.8398"/></g><g><title>LendingsNReaders Service</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="474.3257" y="577.9453"/></g><g><title>AuthNUsers Service</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="714.7432" y="477.0137"/></g><g><title>Message Broker</title><rect fill="#FFFFFF" height="435.3477" style="stroke:#181818;stroke-width:1;" width="10" x="977.8594" y="177.9082"/></g><g><title>Librarian</title><rect fill="#000000" fill-opacity="0.00000" height="564.2793" width="8" x="213.2671" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="216.2778" x2="216.2778" y1="73.9766" y2="638.2559"/></g><g><title>LendingsNReaders Service</title><rect fill="#000000" fill-opacity="0.00000" height="564.2793" width="8" x="470.3257" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="473.6602" x2="473.6602" y1="73.9766" y2="638.2559"/></g><g><title>AuthNUsers Service</title><rect fill="#000000" fill-opacity="0.00000" height="564.2793" width="8" x="715.7432" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="718.8037" x2="718.8037" y1="73.9766" y2="638.2559"/></g><g><title>Message Broker</title><rect fill="#000000" fill-opacity="0.00000" height="564.2793" width="8" x="978.8594" y="73.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="982.4023" x2="982.4023" y1="73.9766" y2="638.2559"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.9785" x="180.2778" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.9785" x="187.2778" y="63.0234">Librarian</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.9785" x="180.2778" y="637.2559"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.9785" x="187.2778" y="657.791">Librarian</text></g><g class="participant participant-head" data-participant="lnr"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191.3311" x="378.6602" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177.3311" x="385.6602" y="63.0234">LendingsNReaders Service</text></g><g class="participant participant-tail" data-participant="lnr"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191.3311" x="378.6602" y="637.2559"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177.3311" x="385.6602" y="657.791">LendingsNReaders Service</text></g><g class="participant participant-head" data-participant="auth"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145.8789" x="646.8037" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.8789" x="653.8037" y="63.0234">AuthNUsers Service</text></g><g class="participant participant-tail" data-participant="auth"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145.8789" x="646.8037" y="637.2559"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131.8789" x="653.8037" y="657.791">AuthNUsers Service</text></g><g class="participant participant-head" data-participant="mb"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9141" x="922.4023" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9141" x="929.4023" y="63.0234">Message Broker</text></g><g class="participant participant-tail" data-participant="mb"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.9141" x="922.4023" y="637.2559"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.9141" x="929.4023" y="657.791">Message Broker</text></g><g><title>Librarian</title><rect fill="#FFFFFF" height="167.8633" style="stroke:#181818;stroke-width:1;" width="10" x="212.2671" y="250.5293"/></g><g><title>LendingsNReaders Service</title><rect fill="#FFFFFF" height="349.416" style="stroke:#181818;stroke-width:1;" width="10" x="469.3257" y="279.8398"/></g><g><title>LendingsNReaders Service</title><rect fill="#FFFFFF" height="35.3105" style="stroke:#181818;stroke-width:1;" width="10" x="474.3257" y="577.9453"/></g><g><title>AuthNUsers Service</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="714.7432" y="477.0137"/></g><g><title>Message Broker</title><rect fill="#FFFFFF" height="435.3477" style="stroke:#181818;stroke-width:1;" width="10" x="977.8594" y="177.9082"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1048.3164" x="0" y="104.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1048.3164" y1="104.6318" y2="104.6318"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1048.3164" y1="107.6318" y2="107.6318"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="154.3276" x="446.9944" y="93.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136.043" x="452.9944" y="110.5449">Service Initialization</text><g class="message" data-participant-1="lnr" data-participant-2="mb"><polygon fill="#181818" points="970.8594,144.5977,980.8594,148.5977,970.8594,152.5977,974.8594,148.5977" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="474.3257" x2="976.8594" y1="148.5977" y2="148.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279.1064" x="481.3257" y="143.8555">Subscribe to "reader.created", "user.created"</text></g><g class="message" data-participant-1="auth" data-participant-2="mb"><polygon fill="#181818" points="965.8594,173.9082,975.8594,177.9082,965.8594,181.9082,969.8594,177.9082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="719.7432" x2="971.8594" y1="177.9082" y2="177.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.1162" x="726.7432" y="173.166">Subscribe to "readerWithUser.created"</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1048.3164" x="0" y="206.5635"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1048.3164" y1="206.5635" y2="206.5635"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1048.3164" y1="209.5635" y2="209.5635"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="110.5479" x="468.8843" y="195.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92.2632" x="474.8843" y="212.4766">Creation Flow</text><g class="message" data-participant-1="client" data-participant-2="client"><polygon fill="#181818" points="200.2671,246.5293,210.2671,250.5293,200.2671,254.5293,204.2671,250.5293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="0" x2="206.2671" y1="250.5293" y2="250.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.2671" x="7" y="245.7871">Create Reader and User (POST)</text></g><g class="message" data-participant-1="client" data-participant-2="lnr"><polygon fill="#181818" points="457.3257,275.8398,467.3257,279.8398,457.3257,283.8398,461.3257,279.8398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="222.2671" x2="463.3257" y1="279.8398" y2="279.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228.0586" x="229.2671" y="275.0977">Create Reader (POST with User data)</text></g><path d="M484,292.8398 L484,317.8398 L709,317.8398 L709,302.8398 L699,292.8398 L484,292.8398" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M699,292.8398 L699,302.8398 L709,302.8398 L699,292.8398" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.0518" x="490" y="310.4082">Create Reader (Status: PENDING)</text><g class="message" data-participant-1="lnr" data-participant-2="mb"><polygon fill="#181818" points="965.8594,355.7715,975.8594,359.7715,965.8594,363.7715,969.8594,359.7715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="479.3257" x2="971.8594" y1="359.7715" y2="359.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.7588" x="486.3257" y="339.7188">publish "readerWithUser.created"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.187" x="486.3257" y="355.0293">(with reader and user data)</text></g><g class="message" data-participant-1="lnr" data-participant-2="mb"><polygon fill="#181818" points="965.8594,385.082,975.8594,389.082,965.8594,393.082,969.8594,389.082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="479.3257" x2="971.8594" y1="389.082" y2="389.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.7534" x="486.3257" y="384.3398">publish "reader.created"</text></g><g class="message" data-participant-1="lnr" data-participant-2="client"><polygon fill="#181818" points="228.2671,414.3926,218.2671,418.3926,228.2671,422.3926,224.2671,418.3926" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="222.2671" x2="468.3257" y1="418.3926" y2="418.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.7725" x="234.2671" y="413.6504">202 Accepted</text></g><g class="message" data-participant-1="mb" data-participant-2="lnr"><polygon fill="#181818" points="490.3257,443.7031,480.3257,447.7031,490.3257,451.7031,486.3257,447.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="484.3257" x2="976.8594" y1="447.7031" y2="447.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.356" x="496.3257" y="442.9609">notify "reader.created"</text></g><g class="message" data-participant-1="mb" data-participant-2="auth"><polygon fill="#181818" points="735.7432,473.0137,725.7432,477.0137,735.7432,481.0137,731.7432,477.0137" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="729.7432" x2="976.8594" y1="477.0137" y2="477.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.3613" x="741.7432" y="472.2715">notify "readerWithUser.created"</text></g><g class="message" data-participant-1="auth" data-participant-2="auth"><line style="stroke:#181818;stroke-width:1;" x1="724.7432" x2="766.7432" y1="506.3242" y2="506.3242"/><line style="stroke:#181818;stroke-width:1;" x1="766.7432" x2="766.7432" y1="506.3242" y2="519.3242"/><line style="stroke:#181818;stroke-width:1;" x1="725.7432" x2="766.7432" y1="519.3242" y2="519.3242"/><polygon fill="#181818" points="735.7432,515.3242,725.7432,519.3242,735.7432,523.3242,731.7432,519.3242" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.2012" x="731.7432" y="501.582">Create User/Credentials</text></g><g class="message" data-participant-1="auth" data-participant-2="mb"><polygon fill="#181818" points="965.8594,544.6348,975.8594,548.6348,965.8594,552.6348,969.8594,548.6348" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="719.7432" x2="971.8594" y1="548.6348" y2="548.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5249" x="726.7432" y="543.8926">publish "user.created"</text></g><g class="message" data-participant-1="mb" data-participant-2="lnr"><polygon fill="#181818" points="495.3257,573.9453,485.3257,577.9453,495.3257,581.9453,491.3257,577.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="489.3257" x2="976.8594" y1="577.9453" y2="577.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.1274" x="501.3257" y="573.2031">notify "user.created"</text></g><g class="message" data-participant-1="lnr" data-participant-2="lnr"><line style="stroke:#181818;stroke-width:1;" x1="484.3257" x2="526.3257" y1="612.2559" y2="612.2559"/><line style="stroke:#181818;stroke-width:1;" x1="526.3257" x2="526.3257" y1="612.2559" y2="625.2559"/><line style="stroke:#181818;stroke-width:1;" x1="479.3257" x2="526.3257" y1="625.2559" y2="625.2559"/><polygon fill="#181818" points="489.3257,621.2559,479.3257,625.2559,489.3257,629.2559,485.3257,625.2559" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.4175" x="491.3257" y="607.5137">Update Reader Status to ACTIVE</text></g><!--SRC=[VLJBRjim4BphAnQwr0RgjiZHW0kuYLiOI9KWZjj3Urb9bBs8J2fyE6Z_fkWX7v1Fq8zrIIcHvDevYQ9cPsU7GrcofO1pBT0Ak16O2mqeSrWRNanWXHk4nLv8ExdGn4_uNAg7AAfGMygeGcaXlgHKeoQKCQ21h2I67o24p4bkJD9qCB0IUa-P20Mbr4FqtDbjuWKCSSZRG-1NOGnk17pIwaxe0DgbKJIRFTV1Kf8bBEatMb8IPhE8ky7a8-Eci7AfoJIb0go2M0Tfxx9WHHw_XTYPtdlasxzM-PtiTZsio2pjlQ-jgE2ob-4zz5f-C5rZr_JK4OokhrQtuuwgTJTgdbuF3tHO7OhWWGKr93bQx75umoEfUALfixMWYgCaAulMcIbSBvABPV9btBUkScb9PdjoTlWfHw6_xkPndPJJJ9rx3QZdqDc7CvXdcQZuSvIB_onv0rTW_BdNZmfoJeLITmP6UEy8BfERCIYt5w0Ouw3IzLEbIO7msVPx84N6SQh_y6wqIrjdOGfi51M_ZkWxxETZw-VbGE8BCUSLWQE2cZjxYrfkdwP3xbSI5BB_dC2cjZqjN_2UrpctuwIRGKvVp1r6kMTU80wZi4MiFXCSQbQiP45wX_LZ_LV1lHEjUYWKXN7oThI2PBXUVCJXPz5PrqtdZi_aOzW68S3NLTwBNvC-Vx_cvxVBRuk-w13WtZlVhty0]--></g></svg>